ext {
    isDev = gradle.ext.IS_DEV
    minsdk_version = 21
    targetsdk_version = 31
    compilesdk_version = 31
    version_name = isDev ? '9.9.9' : gitVersionTag()
    versionCode = isDev ? "999" : gitVersionCode()
    group_id = 'com.xcf'
    artifactId = 'flipper-noop'
}
println "isDev:$isDev,versionName:$version_name,versionCode:$versionCode"

static def gitVersionTag() {
    def commit = 'git rev-list --tags --max-count=1'
    def cmd = "git describe --tags ${commit.execute().text}"
    def version = cmd.execute().text.trim()
    return version
}

static def gitVersionCode() {
    def cmd = 'git rev-list HEAD --count'
    return cmd.execute().text.trim().toInteger()
}